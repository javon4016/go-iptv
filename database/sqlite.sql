PRAGMA foreign_keys=OFF;
BEGIN TRANSACTION;
CREATE TABLE iptv_admin (
    id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
    username TEXT NOT NULL,
    password TEXT NOT NULL
);

CREATE TABLE iptv_category (
    id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
    name TEXT NOT NULL UNIQUE,
    enable INTEGER NOT NULL DEFAULT 1,
    type TEXT NOT NULL DEFAULT 'user',
    proxy INTEGER NOT NULL DEFAULT 0,
    ua TEXT,
    sort INTEGER,
    rules TEXT,
    list_id INTEGER DEFAULT 0,
    rawcount INTEGER DEFAULT 0
);

INSERT INTO iptv_category VALUES(1,'央视频道(自动聚合)',1,'auto',0,'',0,'(?i)CCTV-?(\d+\+?)$',0,0);
INSERT INTO iptv_category VALUES(2,'卫视频道(自动聚合)',1,'auto',0,'',1,'卫视',0,0);

CREATE TABLE iptv_category_list (
    id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
    name TEXT NOT NULL UNIQUE,
    enable INTEGER NOT NULL DEFAULT 1,
    url TEXT DEFAULT NULL,
    ua TEXT,
    autocategory INTEGER DEFAULT 0,
    latesttime TEXT DEFAULT NULL,
    repeat INTEGER DEFAULT 0
);

CREATE TABLE iptv_channels (
    id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
    name TEXT NOT NULL,
    url TEXT DEFAULT NULL,
    sort INTEGER,
    resolution TEXT,
    res_time INTEGER,
    speed TEXT,
    status INTEGER NOT NULL DEFAULT 1,
    e_id INTEGER DEFAULT 0,
    c_id INTEGER DEFAULT 0,
    list_id INTEGER DEFAULT 0
);

CREATE TABLE iptv_epg_list (
    id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
    name TEXT NOT NULL,
    url TEXT DEFAULT NULL,
    status INTEGER NOT NULL DEFAULT 1,
    ua TEXT,
    lasttime BIGINT NOT NULL,
    remarks TEXT DEFAULT NULL
);
INSERT INTO iptv_epg_list VALUES(1,'51zmt','http://epg.51zmt.top:8000/e.xml',1,'',0,'51zmt');

CREATE TABLE iptv_epg (
    id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
    name TEXT NOT NULL,
    content TEXT DEFAULT NULL,
    status INTEGER NOT NULL DEFAULT 1,
    remarks TEXT DEFAULT NULL
);
INSERT INTO iptv_epg VALUES(1,'cntv-CCTV1','CCTV1',1,'CCTV1|CCTV-1');
INSERT INTO iptv_epg VALUES(2,'cntv-CCTV2','CCTV2',1,'CCTV2|CCTV-2');
INSERT INTO iptv_epg VALUES(3,'cntv-CCTV3','CCTV3',1,'CCTV3|CCTV-3');
INSERT INTO iptv_epg VALUES(4,'cntv-CCTV4','CCTV4',1,'CCTV4|CCTV-4');
INSERT INTO iptv_epg VALUES(5,'cntv-CCTV5','CCTV5',1,'CCTV5|CCTV-5');
INSERT INTO iptv_epg VALUES(6,'cntv-CCTV5+','CCTV5+',1,'CCTV5+|CCTV-5+');
INSERT INTO iptv_epg VALUES(7,'cntv-CCTV6','CCTV6',1,'CCTV6|CCTV-6');
INSERT INTO iptv_epg VALUES(8,'cntv-CCTV7','CCTV7',1,'CCTV7|CCTV-7');
INSERT INTO iptv_epg VALUES(9,'cntv-CCTV8','CCTV8',1,'CCTV8|CCTV-8');
INSERT INTO iptv_epg VALUES(10,'cntv-CCTV9','CCTV9',1,'CCTV9|CCTV-9');
INSERT INTO iptv_epg VALUES(11,'cntv-CCTV10','CCTV10',1,'CCTV10|CCTV-10');
INSERT INTO iptv_epg VALUES(12,'cntv-CCTV11','CCTV11',1,'CCTV11|CCTV-11');
INSERT INTO iptv_epg VALUES(13,'cntv-CCTV12','CCTV12',1,'CCTV12|CCTV-12');
INSERT INTO iptv_epg VALUES(14,'cntv-CCTV13','CCTV13',1,'CCTV13|CCTV-13');
INSERT INTO iptv_epg VALUES(15,'cntv-CCTV14','CCTV14',1,'CCTV14|CCTV-14');
INSERT INTO iptv_epg VALUES(16,'cntv-CCTV15','CCTV15',1,'CCTV15|CCTV-15');
INSERT INTO iptv_epg VALUES(17,'cntv-CCTV16','CCTV16',1,'CCTV16|CCTV-16');
INSERT INTO iptv_epg VALUES(18,'cntv-CCTV17','CCTV17',1,'CCTV17|CCTV-17');

CREATE TABLE iptv_meals (
    id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
    name TEXT NOT NULL,
    content TEXT DEFAULT NULL,
    status INTEGER NOT NULL DEFAULT 1
);
INSERT INTO iptv_meals VALUES(1000,'默认套餐','央视频道(自动聚合)_卫视频道(自动聚合)',1);
INSERT INTO iptv_meals VALUES(1001,'卧室套餐','',1);
CREATE TABLE iptv_users (
    id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
    name BIGINT NOT NULL,
    mac TEXT NOT NULL,
    deviceid TEXT NOT NULL,
    model TEXT NOT NULL,
    ip TEXT NOT NULL,
    region TEXT DEFAULT NULL,
    exp BIGINT NOT NULL,
    vpn INTEGER NOT NULL DEFAULT 0,
    idchange INTEGER NOT NULL DEFAULT 0,
    author TEXT DEFAULT NULL,
    authortime BIGINT NOT NULL DEFAULT 0,
    status INTEGER NOT NULL DEFAULT -1,
    lasttime BIGINT NOT NULL,
    marks TEXT DEFAULT NULL,
    meal INTEGER NOT NULL DEFAULT 1000
);
CREATE TABLE IF NOT EXISTS "iptv_movie"  (id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,`name` text,api TEXT DEFAULT NULL,`state` integer);
COMMIT;
